# ğŸ—ï¸ ä¼ä¸šçº§æ¶æ„è®¾è®¡ - å¤šç«¯ç»Ÿä¸€æ–¹æ¡ˆ

## ğŸ“ æ•´ä½“æ¶æ„ï¼ˆæ”¯æŒWeb + ç§»åŠ¨ç«¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å®¢æˆ·ç«¯å±‚ (Multi-Platform)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Webç«¯      â”‚  â”‚   iOS App    â”‚  â”‚  Android App â”‚              â”‚
â”‚  â”‚  (React)     â”‚  â”‚ (React Nativeâ”‚  â”‚ (React Nativeâ”‚              â”‚
â”‚  â”‚              â”‚  â”‚   /Flutter)  â”‚  â”‚   /Flutter)  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                 â”‚                  â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â”‚ HTTPS/WSS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Nginx ç½‘å…³å±‚ (Gateway)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - SSLç»ˆæ­¢                                                           â”‚
â”‚  - è´Ÿè½½å‡è¡¡                                                          â”‚
â”‚  - é™æµä¿æŠ¤                                                          â”‚
â”‚  - é™æ€èµ„æºæœåŠ¡                                                       â”‚
â”‚  - WebSocketæ”¯æŒ                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESTful APIæœåŠ¡å±‚ (Nest.js)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      æ ¸å¿ƒä¸šåŠ¡æ¨¡å—                              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Auth     Users    Materials   Topics   Videos   AI-Providers â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      æ¨ªå‘æ”¯æ’‘æœåŠ¡                              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Logger   Cache   FileStorage   Queue   Notification   Health â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      ä¸­é—´ä»¶å±‚                                  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ JWT Guard  â”‚ Rate Limit  â”‚ Logger  â”‚ Validation  â”‚ Exception â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“                â†“                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  MySQL (RDS)    â”‚ â”‚Redis Clusterâ”‚  â”‚  é˜¿é‡Œäº‘ OSS     â”‚
         â”‚  - ä¸»ä»å¤åˆ¶      â”‚ â”‚ - ç¼“å­˜      â”‚  â”‚  - æ–‡ä»¶å­˜å‚¨     â”‚
         â”‚  - è‡ªåŠ¨å¤‡ä»½      â”‚ â”‚ - Session   â”‚  â”‚  - CDNåŠ é€Ÿ      â”‚
         â”‚  - è¯»å†™åˆ†ç¦»      â”‚ â”‚ - æ¶ˆæ¯é˜Ÿåˆ—  â”‚  â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ç§»åŠ¨ç«¯æ¶æ„æ–¹æ¡ˆ

### æ–¹æ¡ˆé€‰æ‹©ï¼š**React Native** (æ¨è)

**ç†ç”±ï¼š**
1. âœ… ä¸Webç«¯å…±äº«ä¸šåŠ¡é€»è¾‘
2. âœ… åŒæ—¶æ”¯æŒiOSå’ŒAndroid
3. âœ… çƒ­æ›´æ–°èƒ½åŠ›ï¼ˆCodePushï¼‰
4. âœ… åŸç”Ÿæ€§èƒ½ä¼˜ç§€
5. âœ… ç¤¾åŒºç”Ÿæ€å®Œå–„

### æŠ€æœ¯æ ˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        React Native 0.73+            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UIæ¡†æ¶: React Native Paper          â”‚
â”‚  å¯¼èˆª: React Navigation 6            â”‚
â”‚  çŠ¶æ€: Zustand / Redux Toolkit       â”‚
â”‚  ç½‘ç»œ: Axios                         â”‚
â”‚  å­˜å‚¨: AsyncStorage / MMKV           â”‚
â”‚  å›¾ç‰‡: react-native-fast-image       â”‚
â”‚  ç›¸æœº: react-native-vision-camera    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± å‰åç«¯æ¥å£è®¾è®¡ (RESTful + WebSocket)

### RESTful API (ä¸»è¦æ¥å£)

```typescript
// ç»Ÿä¸€å“åº”æ ¼å¼
interface ApiResponse<T> {
  code: number;           // ä¸šåŠ¡çŠ¶æ€ç 
  message: string;        // æç¤ºä¿¡æ¯
  data: T;               // æ•°æ®
  timestamp: number;     // æ—¶é—´æˆ³
  requestId: string;     // è¯·æ±‚è¿½è¸ªID
}

// åˆ†é¡µå“åº”
interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  limit: number;
  hasMore: boolean;
}

// é”™è¯¯å“åº”
interface ErrorResponse {
  code: number;
  message: string;
  errors?: ValidationError[];
  stack?: string;  // ä»…å¼€å‘ç¯å¢ƒ
}
```

### WebSocket (å®æ—¶é€šçŸ¥)

```typescript
// WebSocketäº‹ä»¶ç±»å‹
enum WsEvent {
  // ç³»ç»Ÿäº‹ä»¶
  CONNECTED = 'connected',
  DISCONNECTED = 'disconnected',
  ERROR = 'error',
  
  // ä¸šåŠ¡äº‹ä»¶
  MATERIAL_UPLOADED = 'material:uploaded',    // ç´ æä¸Šä¼ å®Œæˆ
  VIDEO_PUBLISHED = 'video:published',        // è§†é¢‘å‘å¸ƒ
  AI_ANALYSIS_DONE = 'ai:analysis:done',      // AIåˆ†æå®Œæˆ
  NOTIFICATION = 'notification',              // ç³»ç»Ÿé€šçŸ¥
}

// WebSocketæ¶ˆæ¯æ ¼å¼
interface WsMessage {
  event: WsEvent;
  data: any;
  timestamp: number;
}
```

---

## ğŸ” å®‰å…¨æ¶æ„

### 1. è®¤è¯æˆæƒæµç¨‹

```
ç”¨æˆ·ç™»å½•
    â†“
ç”Ÿæˆ Access Token (15åˆ†é’Ÿ) + Refresh Token (7å¤©)
    â†“
Access Token å­˜å‚¨åœ¨å†…å­˜ (Web/App)
Refresh Token å­˜å‚¨åœ¨ HttpOnly Cookie (Web) / Secure Storage (App)
    â†“
æ¯æ¬¡è¯·æ±‚æºå¸¦ Access Token
    â†“
Tokenè¿‡æœŸè‡ªåŠ¨ä½¿ç”¨ Refresh Token åˆ·æ–°
    â†“
Refresh Tokenè¿‡æœŸéœ€é‡æ–°ç™»å½•
```

### 2. å®‰å…¨é˜²æŠ¤çŸ©é˜µ

| å¨èƒç±»å‹ | é˜²æŠ¤æªæ–½ | å®ç°æ–¹å¼ |
|---------|---------|---------|
| SQLæ³¨å…¥ | å‚æ•°åŒ–æŸ¥è¯¢ | TypeORMè‡ªåŠ¨é˜²æŠ¤ |
| XSSæ”»å‡» | è¾“å…¥è¿‡æ»¤ + CSP | class-validator + Helmet |
| CSRFæ”»å‡» | CSRF Token | csurfä¸­é—´ä»¶ |
| æš´åŠ›ç ´è§£ | é€Ÿç‡é™åˆ¶ | @nestjs/throttler |
| DDoSæ”»å‡» | é™æµ + CDN | Nginx + é˜¿é‡Œäº‘CDN |
| æ•æ„Ÿä¿¡æ¯æ³„éœ² | åŠ å¯†å­˜å‚¨ | bcrypt + ç¯å¢ƒå˜é‡ |
| æœªæˆæƒè®¿é—® | JWTéªŒè¯ | Passport JWT |

---

## ğŸ“Š æ•°æ®åº“æ¶æ„ï¼ˆé«˜å¯ç”¨ï¼‰

### ä¸»ä»æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     åŒæ­¥å¤åˆ¶      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MySQLä¸»åº“   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  MySQLä»åº“1  â”‚
â”‚  (å†™å…¥)      â”‚                   â”‚  (åªè¯»)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                  â”‚
       â”‚         åŒæ­¥å¤åˆ¶                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  MySQLä»åº“2  â”‚
                         â”‚  (åªè¯»)      â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯»å†™åˆ†ç¦»ç­–ç•¥

```typescript
// å†™æ“ä½œ â†’ ä¸»åº“
@Transaction()
async createMaterial(data) {
  return this.materialRepository.save(data);
}

// è¯»æ“ä½œ â†’ ä»åº“
@UseReadReplica()
async findMaterials(query) {
  return this.materialRepository.find(query);
}
```

---

## ğŸš€ ç¼“å­˜æ¶æ„ï¼ˆä¸‰çº§ç¼“å­˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åº”ç”¨å±‚ï¼ˆå†…å­˜ç¼“å­˜ï¼‰                â”‚
â”‚         LRU Cache (å¸¸ç”¨æ•°æ®, TTL: 1min)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ Miss
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Rediså±‚ï¼ˆåˆ†å¸ƒå¼ç¼“å­˜ï¼‰              â”‚
â”‚     çƒ­ç‚¹æ•°æ®, TTL: 10min-1hour               â”‚
â”‚     - ç”¨æˆ·ä¿¡æ¯                                â”‚
â”‚     - ç´ æåˆ—è¡¨                                â”‚
â”‚     - ç»Ÿè®¡æ•°æ®                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ Miss
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            MySQLå±‚ï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼‰              â”‚
â”‚            å®Œæ•´æ•°æ®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¼“å­˜ç­–ç•¥

```typescript
// Cache-Asideæ¨¡å¼
async getMaterial(id: number) {
  // 1. æŸ¥è¯¢ç¼“å­˜
  let material = await this.cacheManager.get(`material:${id}`);
  
  if (material) {
    return material;  // ç¼“å­˜å‘½ä¸­
  }
  
  // 2. æŸ¥è¯¢æ•°æ®åº“
  material = await this.materialRepository.findOne(id);
  
  // 3. å†™å…¥ç¼“å­˜
  await this.cacheManager.set(`material:${id}`, material, 600);
  
  return material;
}
```

---

## ğŸ“ æ–‡ä»¶å­˜å‚¨æ¶æ„

```
ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
    â†“
åç«¯æ¥æ”¶ï¼ˆå¤§å°/ç±»å‹éªŒè¯ï¼‰
    â†“
ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åï¼ˆUUID + æ—¶é—´æˆ³ï¼‰
    â†“
ä¸Šä¼ åˆ°OSSï¼ˆåˆ†ç›®å½•å­˜å‚¨ï¼‰
    â”œâ”€ avatars/       (ç”¨æˆ·å¤´åƒ)
    â”œâ”€ materials/     (ç´ ææ–‡ä»¶)
    â”œâ”€ videos/        (è§†é¢‘æ–‡ä»¶)
    â””â”€ temp/          (ä¸´æ—¶æ–‡ä»¶ï¼Œ1å¤©ååˆ é™¤)
    â†“
è¿”å›CDNåŠ é€ŸURL
    â†“
æ•°æ®åº“è®°å½•æ–‡ä»¶ä¿¡æ¯
```

### å›¾ç‰‡å¤„ç†æµç¨‹

```
åŸå›¾ (OSS)
    â†“
é˜¿é‡Œäº‘å›¾ç‰‡å¤„ç†æœåŠ¡
    â”œâ”€ ç¼©ç•¥å›¾ï¼š200x200, 400x400
    â”œâ”€ å‹ç¼©ï¼šè´¨é‡80%, WebPæ ¼å¼
    â”œâ”€ æ°´å°ï¼šå¯é€‰
    â””â”€ è£å‰ªï¼šæ™ºèƒ½è¯†åˆ«ä¸»ä½“
    â†“
CDNç¼“å­˜ï¼ˆå…¨çƒåŠ é€Ÿï¼‰
    â†“
å®¢æˆ·ç«¯å±•ç¤º
```

---

## ğŸ”” æ¶ˆæ¯é€šçŸ¥æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          äº‹ä»¶è§¦å‘æº                   â”‚
â”‚  - ç´ æä¸Šä¼ å®Œæˆ                       â”‚
â”‚  - AIåˆ†æå®Œæˆ                         â”‚
â”‚  - è§†é¢‘å‘å¸ƒæˆåŠŸ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ¶ˆæ¯é˜Ÿåˆ— (Redis/RabbitMQ)      â”‚
â”‚        - è§£è€¦                         â”‚
â”‚        - å¼‚æ­¥å¤„ç†                     â”‚
â”‚        - å‰Šå³°å¡«è°·                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚WebSocketâ”‚      â”‚  æ¨é€æœåŠ¡    â”‚
â”‚ é€šçŸ¥    â”‚      â”‚  - çŸ­ä¿¡      â”‚
â”‚         â”‚      â”‚  - é‚®ä»¶      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  - Appæ¨é€   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ ç›‘æ§ä½“ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             åº”ç”¨å±‚ç›‘æ§                    â”‚
â”‚  - APIå“åº”æ—¶é—´                           â”‚
â”‚  - é”™è¯¯ç‡                                â”‚
â”‚  - QPS/TPS                               â”‚
â”‚  - æ…¢æ¥å£è¿½è¸ª                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åŸºç¡€è®¾æ–½ç›‘æ§                    â”‚
â”‚  - CPU/å†…å­˜/ç£ç›˜ä½¿ç”¨ç‡                   â”‚
â”‚  - æ•°æ®åº“è¿æ¥æ•°                          â”‚
â”‚  - Rediså‘½ä¸­ç‡                           â”‚
â”‚  - ç½‘ç»œæµé‡                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§                    â”‚
â”‚  - ç”¨æˆ·æ´»è·ƒåº¦                            â”‚
â”‚  - ç´ æä¸Šä¼ é‡                            â”‚
â”‚  - è§†é¢‘å‘å¸ƒé‡                            â”‚
â”‚  - è½¬åŒ–ç‡                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             å‘Šè­¦ç³»ç»Ÿ                      â”‚
â”‚  - é’‰é’‰/ä¼ä¸šå¾®ä¿¡                         â”‚
â”‚  - çŸ­ä¿¡/ç”µè¯                             â”‚
â”‚  - è‡ªåŠ¨æ‰©å®¹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¢ éƒ¨ç½²æ¶æ„ï¼ˆé«˜å¯ç”¨ï¼‰

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              é˜¿é‡Œäº‘ SLBï¼ˆè´Ÿè½½å‡è¡¡ï¼‰               â”‚
â”‚                   HTTPS + HTTP/2                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“              â†“              â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ECS-1   â”‚   â”‚ ECS-2   â”‚   â”‚ ECS-3   â”‚
   â”‚ Nginx   â”‚   â”‚ Nginx   â”‚   â”‚ Nginx   â”‚
   â”‚ PM2Ã—4   â”‚   â”‚ PM2Ã—4   â”‚   â”‚ PM2Ã—4   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“              â†“              â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚         RDS MySQL (ä¸»ä»)             â”‚
   â”‚         Redis Cluster                â”‚
   â”‚         OSS + CDN                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dockerå®¹å™¨åŒ–æ–¹æ¡ˆ

```yaml
services:
  api:
    image: video-production-api:latest
    replicas: 3
    resources:
      limits:
        cpus: '2'
        memory: 4G
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  
  redis:
    image: redis:7-alpine
    volumes:
      - redis-data:/data
  
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
```

---

## ğŸ¨ å‰ç«¯æ¶æ„ï¼ˆWeb + Mobileç»Ÿä¸€ï¼‰

### é¡¹ç›®ç»“æ„ï¼ˆMonorepoï¼‰

```
video-production/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ web/                    # Webåº”ç”¨ (React + Vite)
â”‚   â”œâ”€â”€ mobile/                 # ç§»åŠ¨ç«¯ (React Native)
â”‚   â”œâ”€â”€ shared/                 # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ api/               # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ types/             # TypeScriptç±»å‹
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ constants/         # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ ui-components/         # å…±äº«ç»„ä»¶åº“
â”œâ”€â”€ backend/                   # åç«¯æœåŠ¡
â””â”€â”€ infrastructure/            # åŸºç¡€è®¾æ–½ä»£ç 
```

### å…±äº«å±‚è®¾è®¡

```typescript
// packages/shared/api/client.ts
// Webå’ŒMobileå…±ç”¨çš„APIå®¢æˆ·ç«¯

export class ApiClient {
  async getMaterials(query: MaterialQuery): Promise<Material[]> {
    return this.request('/materials', { params: query });
  }
  
  async uploadFile(file: File | Blob): Promise<UploadResult> {
    const formData = new FormData();
    formData.append('file', file);
    return this.request('/oss/upload', { 
      method: 'POST', 
      body: formData 
    });
  }
}
```

---

## ğŸ”„ CI/CDæµç¨‹

```
å¼€å‘æäº¤ä»£ç 
    â†“
Git Push â†’ GitLab/GitHub
    â†“
è§¦å‘ CI Pipeline
    â”œâ”€ ä»£ç æ£€æŸ¥ (ESLint)
    â”œâ”€ å•å…ƒæµ‹è¯• (Jest)
    â”œâ”€ æ„å»º (Docker)
    â””â”€ å®‰å…¨æ‰«æ
    â†“
éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
    â†“
è‡ªåŠ¨åŒ–æµ‹è¯•
    â”œâ”€ æ¥å£æµ‹è¯•
    â”œâ”€ E2Eæµ‹è¯•
    â””â”€ æ€§èƒ½æµ‹è¯•
    â†“
äººå·¥å®¡æ ¸
    â†“
éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
    â”œâ”€ è“ç»¿éƒ¨ç½²
    â”œâ”€ é‡‘ä¸é›€å‘å¸ƒ
    â””â”€ è‡ªåŠ¨å›æ»šæœºåˆ¶
```

---

## ğŸ’¯ æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®ç°æ–¹å¼ |
|------|--------|---------|
| APIå“åº”æ—¶é—´ | P95 < 200ms | ç¼“å­˜ + æ•°æ®åº“ä¼˜åŒ– |
| é¦–å±åŠ è½½ | < 2s | SSR + ä»£ç åˆ†å‰² + CDN |
| æ–‡ä»¶ä¸Šä¼  | 10MB < 5s | åˆ†ç‰‡ä¸Šä¼  + OSSç›´ä¼  |
| å¹¶å‘ç”¨æˆ· | 10000+ | è´Ÿè½½å‡è¡¡ + ç¼“å­˜ |
| å¯ç”¨æ€§ | 99.95% | ä¸»ä»æ¶æ„ + å¥åº·æ£€æŸ¥ |
| é”™è¯¯ç‡ | < 0.1% | å¼‚å¸¸å¤„ç† + é‡è¯•æœºåˆ¶ |

---

## ğŸ¯ é¡¹ç›®é‡Œç¨‹ç¢‘

### Phase 1: P0æ ¸å¿ƒåŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
- âœ… æ—¥å¿—ç³»ç»Ÿ
- âœ… APIæ–‡æ¡£
- âœ… å®‰å…¨é˜²æŠ¤
- âœ… å¥åº·æ£€æŸ¥
- âœ… å¼‚å¸¸å¤„ç†

### Phase 2: P1å…³é”®åŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
- âœ… Reactå‰ç«¯
- âœ… Redisç¼“å­˜
- âœ… æ–‡ä»¶ä¼˜åŒ–
- âœ… æ•°æ®å¤‡ä»½

### Phase 3: P2å¢å¼ºåŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
- âœ… æƒé™ç³»ç»Ÿ
- âœ… ç›‘æ§å‘Šè­¦
- âœ… DockeråŒ–
- âœ… å•å…ƒæµ‹è¯•

### Phase 4: ç§»åŠ¨ç«¯ï¼ˆ2å‘¨ï¼‰
- âœ… React Native App
- âœ… iOS/Androidæ‰“åŒ…
- âœ… æ¨é€é€šçŸ¥
- âœ… ç¦»çº¿ç¼“å­˜

**æ€»è®¡ï¼š5å‘¨è¾¾åˆ°100åˆ†ä¼ä¸šçº§æ ‡å‡†**

---

è¿™ä¸ªæ¶æ„å¯ä»¥æ”¯æ’‘ï¼š
- ğŸ“± å¤šç«¯ç»Ÿä¸€ï¼ˆWeb + iOS + Androidï¼‰
- ğŸš€ é«˜æ€§èƒ½ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰
- ğŸ”’ é«˜å®‰å…¨ï¼ˆä¼ä¸šçº§é˜²æŠ¤ï¼‰
- ğŸ“ˆ å¯æ‰©å±•ï¼ˆæ”¯æŒç™¾ä¸‡ç”¨æˆ·ï¼‰
- ğŸ› ï¸ æ˜“ç»´æŠ¤ï¼ˆå®Œæ•´ç›‘æ§å’Œæ–‡æ¡£ï¼‰
